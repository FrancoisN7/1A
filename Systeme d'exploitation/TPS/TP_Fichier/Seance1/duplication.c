#include <stdio.h>
#include <unistd.h>
#include <stdlib.h> /* exit */
#include <fcntl.h>

int main () {
    pid_t pidFils ;
    int desc_dest;
     
    pidFils = fork ();
    
    //erreur du fork
    if ( pidFils == -1) {
        printf ("Erreur fork \n");
        exit (1);
    }
    
    //Fils
    if ( pidFils == 0) { 
    desc_dest = open("test.txt", O_WRONLY | O_CREAT | O_TRUNC, 0600);
        for (int i=0; i<10; i++){
            sleep(1);
            dprintf(desc_dest, "Fils\n");
        }
    }
        
    //PÃ¨re 
    else {
    desc_dest = open("test.txt", O_WRONLY | O_CREAT | O_TRUNC, 0600);
        for (int i=0; i<10; i++){
            sleep(1);
            dprintf(desc_dest, "Pere\n");
        }
    }
        
return EXIT_SUCCESS ; /* -> exit ( EXIT_SUCCESS ); pour le p `e re */
}
